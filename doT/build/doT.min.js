!function(){function e(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(n,function(n){return e[n]||n}):this}}function n(e,t,r){return("string"==typeof t?t:t.toString()).replace(e.define||i,function(n,t,o,a){return 0===t.indexOf("def.")&&(t=t.substring(4)),t in r||(":"===o?(e.defineParams&&a.replace(e.defineParams,function(e,n,o){r[t]={arg:n,text:o}}),t in r||(r[t]=a)):new Function("def","def['"+t+"']="+a)(r)),""}).replace(e.use||i,function(t,o){e.useParams&&(o=o.replace(e.useParams,function(e,n,t,o){return r[t]&&r[t].arg&&o?(e=(t+":"+o).replace(/'|\\/g,"_"),r.__exp=r.__exp||{},r.__exp[e]=r[t].text.replace(RegExp("(^|[^\\w$])"+r[t].arg+"([^\\w$])","g"),"$1"+o+"$2"),n+"def.__exp['"+e+"']"):void 0}));var a=new Function("def","return "+o)(r);return a?n(e,a,r):a})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var r,o={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof module&&module.exports?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):(r=function(){return this||(0,eval)("this")}(),r.doT=o),String.prototype.encodeHTML=e();var a={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},i=/$^/;o.template=function(r,u,c){u=u||o.templateSettings;var d,l,p=u.append?a.append:a.split,s=0;r=u.use||u.define?n(u,r,c||{}):r,r=("var out='"+(u.strip?r.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):r).replace(/'|\\/g,"\\$&").replace(u.interpolate||i,function(e,n){return p.start+t(n)+p.end}).replace(u.encode||i,function(e,n){return d=!0,p.start+t(n)+p.endencode}).replace(u.conditional||i,function(e,n,r){return n?r?"';}else if("+t(r)+"){out+='":"';}else{out+='":r?"';if("+t(r)+"){out+='":"';}out+='"}).replace(u.iterate||i,function(e,n,r,o){return n?(s+=1,l=o||"i"+s,n=t(n),"';var arr"+s+"="+n+";if(arr"+s+"){var "+r+","+l+"=-1,l"+s+"=arr"+s+".length-1;while("+l+"<l"+s+"){"+r+"=arr"+s+"["+l+"+=1];out+='"):"';} } out+='"}).replace(u.evaluate||i,function(e,n){return"';"+t(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),d&&u.selfcontained&&(r="String.prototype.encodeHTML=("+e.toString()+"());"+r);try{return new Function(u.varname,r)}catch(f){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+r),f}},o.compile=function(e,n){return o.template(e,null,n)}}(),Arenite.Templates=function(e,n){var t={},r=function(e,r){t[e]=n.template(r)},o=function(n,t){var o=e.async.latch(n.length,function(){"function"==typeof t?t():e.bus.publish("templates-loaded")},"template loader");n.forEach(function(n){e.loader.loadResource(n,function(e){var n=document.createElement("div");n.innerHTML=e.responseText,document.body.appendChild(n);for(var t=n.getElementsByTagName("script"),a=0;a<t.length;a++)r(t[a].id,t[a].innerHTML);document.body.removeChild(n),o.countDown()},function(e){window.console.error(e)})})},a=function(e,n){t[e]=n},i=function(e,n){if(!t[e])throw"Unable to find template '"+e+"'";return t[e](n)},u=function(e,n,t){t.innerHTML=i(e,n)},c=function(e,n,t){var r=document.createElement("div");r.innerHTML=i(e,n),t.appendChild(r.childNodes[0])};return{add:o,addText:r,addCompiled:a,apply:i,applyTo:u,append:c}};